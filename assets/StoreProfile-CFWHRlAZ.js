import{r as a,j as e,L as F,b as C,G as K,a as le,M as A,p as k,o as ce,g as ne,c as de,d as ie}from"./index-DXL0b-Nc.js";import{A as J}from"./AddressForm-DE2fG9jQ.js";import{c as me,d as Y,e as he}from"./createContent-DD-n6Q9m.js";import{u as L}from"./index.esm-BdCDqsnP.js";import{T as xe}from"./Toast-DPX6yt7t.js";import{I as W}from"./index-BpMqLs7L.js";const ue="https://new-json.onrender.com",pe=()=>{const{user:c,store:i}=a.useContext(Q),s=i.store_id,[f,G]=a.useState([]),[l,g]=a.useState([]),[m,D]=a.useState([]),[t,v]=a.useState(!0),[M,n]=a.useState(!0),[u,I]=a.useState(!1),U=async()=>{i.store_isAuth!=="pass"?I(!1):i.store_isAuth==="pass"&&I(!0);let r=[],y=[];try{const $=await C.get(`${ue}/storesData/${s}/gamesData`);G($.data),$.data.map(N=>{N.game_isStock?r.push(N):y.push(N)})}catch{}r.length===0?v(!1):g(r),y.length===0?n(!1):D(y)};return a.useEffect(()=>{U()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"col-12 m-0 pt-10 px-0 ",children:[e.jsxs("div",{className:"border-nature-90 border rounded-2",children:[e.jsx("div",{className:"ParticipatingGroupTitle bg-secondary-95 px-6 py-5 text-secondary-50 fw-bold fs-h6",children:"已上架"}),e.jsx("div",{className:"p-6 bg-white",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-light px-3",children:e.jsxs("tr",{className:"ParticipatingGroupThead ",children:[e.jsx("th",{scope:"col",className:"text-secondary-40 ps-6 py-3 pe-0",children:"密室名稱"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室地點"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"開幕日期"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"最低價格"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0",children:"人數上限"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0"})]})}),e.jsxs("tbody",{children:[u===!1&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6",children:e.jsx("p",{children:"尚未驗證成功，請先驗證"})})}),u&&l.length>0&&l.map(r=>e.jsxs("tr",{className:"ParticipatingGroupThead",children:[e.jsx("td",{className:"ps-5 py-2 pe-0",children:r.game_name}),e.jsx("td",{className:"py-2 px-0",children:r.game_address}),e.jsx("td",{className:"py-2 px-0",children:r.game_start_date}),e.jsxs("td",{className:"py-2 px-0",children:[r.game_min_price,"元起"]}),e.jsxs("td",{className:"py-2 px-0",children:[r.game_maxNum_Players,"人"]}),e.jsx("td",{className:"pe-5 py-2 ps-0",children:e.jsxs(F,{to:`/Game_content/${r.game_id}`,className:"text-black",children:["查看詳情 ",e.jsx(W,{color:"black"})]})})]},r.game_id)),u&&l.length==0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6",children:e.jsxs("p",{children:["沒有發布任何遊戲",e.jsx("br",{}),e.jsx(F,{className:"d-inline text-nowrap",to:"/TeamBuy",children:"新增密室資訊"}),"提供給使用者吧!"]})})})]})]})})]}),e.jsxs("div",{className:"border-nature-90 border rounded-2 my-10",children:[e.jsx("div",{className:"ParticipatingGroupTitle bg-secondary-95 px-6 py-5 text-secondary-50 fw-bold fs-h6",children:"等待上架"}),e.jsx("div",{className:"p-6 bg-white",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-light px-3",children:e.jsxs("tr",{className:"ParticipatingGroupThead ",children:[e.jsx("th",{scope:"col",className:"text-secondary-40 ps-6 py-3 pe-0",children:"密室名稱"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室地點"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"開幕日期"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"最低價格"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0",children:"人數上限"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0"})]})}),e.jsxs("tbody",{children:[u===!1&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6",children:e.jsx("p",{children:"尚未驗證成功，請先驗證"})})}),u&&m.length>0&&m.map(r=>e.jsxs("tr",{className:"ParticipatingGroupThead",children:[e.jsx("td",{className:"ps-5 py-2 pe-0",children:r.game_name}),e.jsx("td",{className:"py-2 px-0",children:r.game_address}),e.jsx("td",{className:"py-2 px-0",children:r.game_start_date}),e.jsx("td",{className:"py-2 px-0",children:r.game_min_price}),e.jsxs("td",{className:"py-2 px-0",children:[r.game_maxNum_Players,"人"]}),e.jsx("td",{className:"pe-5 py-2 ps-0",children:e.jsxs(F,{to:`/StoreGameInfo/${r.game_id}`,className:"text-black",children:["查看詳情 ",e.jsx(W,{color:"black"})]})})]},r.game_id)),u&&m.length==0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6",children:e.jsxs("p",{children:["未有任何密室審核中，",e.jsx("br",{}),e.jsx(F,{className:"d-inline text-nowrap",to:"/StoreGameInfo",children:"新增密室資訊"}),"提供給使用者吧！"]})})})]})]})})]})]})})},Q=a.createContext({});function _e(c){return K({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8.6 1c1.6.1 3.1.9 4.2 2 1.3 1.4 2 3.1 2 5.1 0 1.6-.6 3.1-1.6 4.4-1 1.2-2.4 2.1-4 2.4-1.6.3-3.2.1-4.6-.7-1.4-.8-2.5-2-3.1-3.5C.9 9.2.8 7.5 1.3 6c.5-1.6 1.4-2.9 2.8-3.8C5.4 1.3 7 .9 8.6 1zm.5 12.9c1.3-.3 2.5-1 3.4-2.1.8-1.1 1.3-2.4 1.2-3.8 0-1.6-.6-3.2-1.7-4.3-1-1-2.2-1.6-3.6-1.7-1.3-.1-2.7.2-3.8 1-1.1.8-1.9 1.9-2.3 3.3-.4 1.3-.4 2.7.2 4 .6 1.3 1.5 2.3 2.7 3 1.2.7 2.6.9 3.9.6zM7.9 7.5L10.3 5l.7.7-2.4 2.5 2.4 2.5-.7.7-2.4-2.5-2.4 2.5-.7-.7 2.4-2.5-2.4-2.5.7-.7 2.4 2.5z"},child:[]}]})(c)}function je(c){return K({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 56C145.72 56 56 145.72 56 256s89.72 200 200 200 200-89.72 200-200S366.28 56 256 56zm0 82a26 26 0 1 1-26 26 26 26 0 0 1 26-26zm48 226h-88a16 16 0 0 1 0-32h28v-88h-16a16 16 0 0 1 0-32h32a16 16 0 0 1 16 16v104h28a16 16 0 0 1 0 32z"},child:[]}]})(c)}const P="https://new-json.onrender.com",fe=()=>{const c=le(),{user:i,store:s}=a.useContext(Q),{register:f,handleSubmit:G,formState:{errors:l},setValue:g}=L(),{register:m,handleSubmit:D,formState:{errors:t},setValue:v,watch:M}=L(),n=M("store_method"),u=a.useRef(null),I=a.useRef(null),U=a.useRef(null),r=a.useRef(null),[y,$]=a.useState("尚未驗證");a.useEffect(()=>{v("store_method",_.store_method)},[n]);const[N,H]=a.useState({store_name:s.store_name,store_address:s.store_address,store_email:s.store_email,store_tel:s.store_tel}),[_,R]=a.useState({user_name:i.user_name,user_email:i.user_email,user_tel:i.user_tel,store_self_address:s.store_self_address,store_contact:s.store_contact,store_method:s.store_method,store_tax_id:s.store_tax_id,store_documentation:s.store_documentation,store_website:s.store_website}),[q,B]=a.useState(!1),[E,O]=a.useState(!1),X=D(o=>{const h=s.store_id,p=i.user_id,{userData:d,storeData:j}=Object.entries(o).reduce((b,[x,S])=>(x.startsWith("user_")?b.userData[x]=S:x.startsWith("store_")&&(b.storeData[x]=S),b),{userData:{},storeData:{}}),z=async b=>{b.store_update_at=Y().format("YYYY-MM-DD HH:mm:ss");try{const x=await C.patch(`${P}/storesData/${h}`,b)}catch(x){const S=x.response.data;c(k({text:S,status:"failed"}))}},oe=async b=>{b.user_update_at=Y().format("YYYY-MM-DD HH:mm:ss");try{await C.patch(`${P}/usersData/${p}`,b);try{const x=await C.get(`${P}/usersData/${p}`);c(ce(x.data))}catch(x){const S=x.response.data;c(k({text:S,status:"failed"}))}}catch(x){const S=x.response.data;c(k({text:S,status:"failed"}))}};E&&(z(j),oe(d),R(o),O(!1))}),w=o=>{const{name:h,value:p}=o.target;h==="store_method"&&v("store_method",p),R(d=>{const j={...d,[h]:p};return O(JSON.stringify(j)!==JSON.stringify(_)),j})},ee=G(o=>{const h=s.store_id;q&&(async d=>{d.store_update_at=Y().format("YYYY-MM-DD HH:mm:ss");try{const j=await C.patch(`${P}/storesData/${h}`,d);H(d),B(!1)}catch(j){const z=j.response.data;c(k({text:z,status:"failed"}))}})(o)}),T=o=>{const{name:h,value:p}=o.target;H(d=>{const j={...d,[h]:p};return B(JSON.stringify(j)!==JSON.stringify(N)),j})},se=async()=>{const o=i.user_email,h=U.current.value,d=await c(ne({user_email:o,user_password:h}));d.meta.requestStatus==="fulfilled"?(re(),V(),$("請輸入新密碼"),U.current.value=""):$(d.payload==="信箱及密碼需要輸入"||d.payload==="密碼請超過4碼"?"請輸入密碼驗證或密碼未超過4碼":d.payload)},ae=async()=>{const h={user_password:r.current.value},p=i.user_id;h.user_update_at=Y().format("YYYY-MM-DD HH:mm:ss");try{const d=await C.patch(`${P}/usersData/${p}`,h);c(k({text:`修改密碼成功
請下次登入使用新密碼`,status:"success"})),$("尚未驗證"),r.current.value="",setTimeout(()=>{Z()},1e3)}catch(d){console.log(d)}},te=()=>{A.getInstance(u.current).show()},V=()=>{A.getInstance(u.current).hide()},re=()=>{A.getInstance(I.current).show()},Z=()=>{A.getInstance(I.current).hide()};return a.useEffect(()=>{new A(u.current,{backdrop:!1}),new A(I.current,{backdrop:!1})},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-12 m-0 pt-10 px-0",children:[e.jsxs("div",{className:"border-nature-90 border rounded-2",children:[e.jsx("div",{className:"BasicStoreInfoTitle fs-h6 lh-sm bg-secondary-95 fw-bold px-5 py-5 text-secondary-50",children:"基本資料"}),e.jsxs("div",{className:"user-info bg-white ",children:[e.jsxs("div",{className:"user_name d-flex px-6 py-sm-5 py-4 align-items-center border-nature-90 border-1 border-top border-bottom",children:[e.jsx("img",{src:s.store_isAuth==="processing"?"./icon/processingStore.png":s.store_isAuth==="pass"?"./icon/passStore.png":"./icon/rejectedStore.png",alt:i.user_name,className:"rounded-circle",style:{width:"10%",objectFit:"cover",aspectRatio:"1/1"}}),e.jsxs("h5",{className:"ps-5 fw-bold",children:[i.user_name,s.store_isAuth==="processing"?e.jsxs("span",{className:"text-secondary-40",children:[e.jsx(je,{className:"ms-3 me-1"})," 發布遊戲資格審核中"]}):s.store_isAuth==="pass"?e.jsxs("span",{className:"text-success",children:[e.jsx(me,{className:"ms-3 me-1"})," 審核成功，可新增遊戲"]}):e.jsxs("span",{className:"text-danger",children:[e.jsx(_e,{className:"ms-3 me-1"})," 資格審核失敗，請再次確認相關資訊，才可發布遊戲"]})]})]}),e.jsx("div",{className:"user_information p-6 ",children:e.jsxs("form",{className:"text-start",onSubmit:X,id:"storeUserData",children:[e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_name",className:"col-sm-2",children:"店家名稱"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...m("user_name",{required:"店家名稱欄位必填"}),type:"text",className:`form-control ${t.user_name&&"is-invalid"}`,id:"user_name",name:"user_name",placeholder:"請輸入店家名稱",value:_.user_name,onChange:w}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:t.user_name?t.user_name.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_email",className:"col-sm-2",children:"登入信箱"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...m("user_email",{required:"信箱欄位必填",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"請輸入有效的 Email 格式，如 example@mail.com"}}),type:"text",className:`form-control ${t.user_email&&"is-invalid"}`,id:"user_email",name:"user_email",placeholder:"請輸入聯絡信箱",value:_.user_email,onChange:w}),e.jsx("button",{className:"text-secondary-50 bg-transparent border-0 border-bottom pt-1 ",onClick:te,children:"修改密碼"}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:t.user_email?t.user_email.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_tel",className:"col-sm-2",children:"聯絡人電話"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...m("user_tel",{required:"電話欄位必填",pattern:{value:/^(0[2-8]-\d{7,8}|09\d{8})$/,message:"市話格式為02-12345678手機格式為0912456789"}}),type:"text",className:`form-control ${t.user_tel&&"is-invalid"}`,id:"user_tel",name:"user_tel",placeholder:"請輸入電話",value:_.user_tel,onChange:w}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:t.user_tel?t.user_tel.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_contact",className:"col-sm-2",children:"聯絡人"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...m("store_contact",{required:"聯絡人欄位必填"}),type:"text",className:`form-control ${t.store_contact&&"is-invalid"}`,id:"store_contact",name:"store_contact",placeholder:"請輸入聯絡信箱",value:_.store_contact,onChange:w}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:t.store_contact?t.store_contact.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_self_address",className:"col-sm-2 ",children:"公司地址"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx(J,{onChange:o=>{v("store_self_address",o),w({target:{name:"store_self_address",value:o}})},initialAddress:s.store_self_address}),e.jsx("input",{...m("store_self_address",{required:"請填寫完整地址"}),type:"text",className:`form-control mt-2 ${t.store_self_address?"is-invalid":""}`,id:"store_self_address",name:"store_self_address",placeholder:"完整地址將自動填入",value:_.store_self_address,readOnly:!0}),e.jsx("div",{className:"error-message text-danger mt-1",children:t.store_self_address?t.store_self_address.message:"　"})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"store_method",className:"col-sm-2 col-form-label formrequired",children:"驗證方式"}),e.jsxs("div",{className:"col-sm-5",children:[e.jsxs("select",{className:`form-select ${t.store_method&&"is-invalid"}`,"aria-label":"Default select example",...m("store_method",{required:"驗證方式必選",validate:o=>o!=="請選擇驗證方式"||"請選擇驗證方式"}),value:_.store_method,onChange:w,children:[e.jsx("option",{defaultValue:!0,value:"請選擇驗證方式",children:"請選擇驗證方式"}),e.jsx("option",{value:"統一編號",children:"有統一編號，請輸入統一編號"}),e.jsx("option",{value:"其他",children:"無統編，請提供其餘可證明資料"})]}),e.jsx("div",{className:"error-message text-danger mt-1",children:t.store_method?t.store_method.message:"　"})]}),e.jsxs("div",{className:"col-sm-5",children:[n&&(n==="請選擇驗證方式"||n===""||n===void 0)&&e.jsx("input",{type:"text",className:"form-control",disabled:!0}),n&&n==="統一編號"&&e.jsx("input",{...m("store_tax_id",{required:"統一編號欄位必填",minLength:{value:8,message:"統一編號格式錯誤"}}),type:"text",className:`form-control ${t.store_tax_id&&"is-invalid"}`,id:"store_tax_id",name:"store_tax_id",placeholder:"請填入公司統一編號",value:_.store_tax_id,onChange:w}),n&&n==="其他"&&e.jsx("input",{...m("store_documentation",{required:"其餘證明文件欄位必填"}),type:"url",className:`form-control ${t.store_documentation&&"is-invalid"}`,id:"store_documentation",name:"store_documentation",placeholder:"請將其他證明文件上傳到雲端硬碟，並放上共用連結",value:_.store_documentation,onChange:w}),e.jsxs("div",{className:"error-message text-danger mt-1",children:[t.store_tax_id?t.store_tax_id.message:"　",t.store_documentation?t.store_documentation.message:"　"]})]})]})]})}),e.jsx("div",{className:"ps-6 py-4 border-nature-90 border-1 border-top",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"reset",className:"btn bg-nature-60 text-white me-6",disabled:!E,form:"storeUserData",children:"取消更改"}),e.jsx("button",{type:"submit",className:"btn bg-secondary-60 text-white",form:"storeUserData",disabled:!E,children:"儲存變更"})]})})]})]}),e.jsx(xe,{})]}),e.jsx("div",{className:"col-12 m-0 pt-10 px-0 mb-10",children:e.jsxs("div",{className:"border-nature-90 border rounded-2",children:[e.jsxs("div",{className:"BasicStoreInfoTitle fs-h6 lh-sm bg-secondary-95 fw-bold px-5 py-5 text-secondary-50",children:["場館資料(以下為提供給訪客的資訊)",e.jsxs("p",{className:"fs-Body-1 mt-1 text-black fw-normal",children:[e.jsx("span",{className:"text-danger",children:"*"})," 代表可在不同密室上進行更改"]})]}),e.jsxs("div",{className:"user-info bg-white ",children:[e.jsx("div",{className:"user_information p-6 ",children:e.jsxs("form",{className:"text-start",onSubmit:ee,id:"storeData",children:[e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_name",className:"col-sm-2",children:"店家名稱"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...f("store_name",{required:"店家名稱欄位必填"}),type:"text",className:`form-control ${l.store_name&&"is-invalid"}`,id:"store_name",name:"store_name",placeholder:"請輸入店家名稱",value:N.store_name,onChange:T}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:l.store_name?l.store_name.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_address",className:"col-sm-2 formrequired",children:"店家地址"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx(J,{onChange:o=>{g("store_address",o),T({target:{name:"store_address",value:o}})},initialAddress:s.store_address}),e.jsx("input",{...f("store_address",{required:"請填寫完整地址"}),type:"text",className:`form-control mt-2 ${l.store_address?"is-invalid":""}`,id:"store_address",name:"store_address",placeholder:"完整地址將自動填入",value:N.store_address,readOnly:!0}),e.jsx("div",{className:"error-message text-danger mt-1",children:l.store_address?l.store_address.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_email",className:"col-sm-2",children:"聯絡信箱"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...f("store_email",{required:"聯絡信箱欄位必填",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"請輸入有效的 Email 格式，如 example@mail.com"}}),type:"text",className:`form-control ${l.store_email&&"is-invalid"}`,id:"store_email",name:"store_email",placeholder:"請輸入聯絡信箱",value:N.store_email,onChange:T}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:l.store_email?l.store_email.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_tel",className:"col-sm-2",children:"電話"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...f("store_tel",{required:"電話欄位必填",pattern:{value:/^(0[2-8]-\d{7,8}|09\d{8})$/,message:"市話格式為02-12345678手機格式為0912456789"}}),type:"text",className:`form-control ${l.store_tel&&"is-invalid"}`,id:"store_tel",name:"store_tel",placeholder:"請輸入電話",value:N.store_tel,onChange:T}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:l.store_tel?l.store_tel.message:"　"})]})]})]})}),e.jsx("div",{className:"ps-6 py-4 border-nature-90 border-1 border-top",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"reset",className:"btn bg-nature-60 text-white me-6",disabled:!q,form:"storeData",children:"取消更改"}),e.jsx("button",{type:"submit",className:"btn bg-secondary-60 text-white",form:"storeData",disabled:!q,children:"儲存變更"})]})})]})]})}),e.jsx("div",{ref:u,className:"modal fade m-0",id:"updatePawwordModal",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-secondary-95 flex-column align-items-start",children:[e.jsx("h4",{className:"modal-title fw-bold mb-2",children:"修改密碼"}),e.jsx("p",{children:"請先輸入目前密碼進行驗證"})]}),e.jsxs("div",{className:"modal-body px-5 py-10",children:[e.jsx("input",{type:"password",className:"w-100 border border-1 border-black rounded-1 ",ref:U}),e.jsx("div",{className:`error-message ${y==="尚未驗證"?"text-secondary-40":"text-danger"}  mt-1 fs-caption lh-1`,children:y})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"button",className:"btn bg-nature-60 text-white me-6",onClick:V,children:"取消更改"}),e.jsx("button",{type:"button",className:"btn bg-secondary-60 text-white",onClick:se,children:"下一步"})]})})]})})}),e.jsx("div",{ref:I,className:"modal fade m-0",id:"updatePawwordModal",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-secondary-95",children:e.jsx("h4",{className:"modal-title fw-bold ",children:"修改密碼"})}),e.jsxs("div",{className:"modal-body px-6 py-10",children:[e.jsx("input",{type:"password",className:"w-100 border border-1 border-black rounded-1 ",ref:r}),e.jsx("div",{className:`error-message ${y==="尚未驗證"?"text-secondary-40":"text-danger"}  mt-1 fs-caption lh-1`,children:y})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"button",className:"btn bg-nature-60 text-white me-6",onClick:Z,children:"取消更改"}),e.jsx("button",{type:"button",className:"btn bg-secondary-60 text-white",onClick:ae,children:"儲存變更"})]})})]})})})]})},Ne="https://new-json.onrender.com";function De(){const{user:c,user_token:i}=de(n=>n.userInfo),{user_id:s,activedefaultTab:f}=ie(),[G,l]=a.useState(!1),[g,m]=a.useState(f),[D,t]=a.useState({}),v=a.useCallback(()=>{i&&Number(s)===Number(c.user_id)?l(!0):l(!1)},[i,c==null?void 0:c.user_id,s]),M=a.useCallback(async()=>{try{const n=await C.get(`${Ne}/usersData/${s}/storesData`);t(n.data[0])}catch(n){console.log(n.response.data.errors[0])}},[s]);return a.useEffect(()=>{M()},[M]),a.useEffect(()=>{v(),m(f)},[s,f,v]),e.jsx(e.Fragment,{children:G?e.jsxs("div",{className:"custom-profileMain flex-grow-1",children:[e.jsx("div",{className:"container-fluid bg-primary-99",children:e.jsx("div",{className:"container-lg ",children:e.jsx("div",{className:"row pt-10 ",children:e.jsxs("ul",{className:"d-flex",children:[e.jsx("li",{className:"",children:e.jsx(F,{className:`custom-profileTab fs-lg-h6 fs-Body-1 lh-base lh-lg-normal fw-bold ${g==="basicStoreInfo"?"active":""} `,to:`/Store_profile/${s}/basicStoreInfo`,children:"基本資訊"})}),e.jsx("li",{className:"",children:e.jsx(F,{className:`custom-profileTab fs-lg-h6 fs-Body-1 lh-base lh-lg-normal fw-bold ${g==="myGames"?"active":""} `,to:`/Store_profile/${s}/myGames`,children:"密室總覽"})})]})})})}),e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"container-lg",children:e.jsx("div",{className:"row m-0 flex-column flex-md-row g-5 justify-content-center align-items-center",children:e.jsxs(he.Provider,{value:{user:c,store:D},children:[Object.keys(D).length>0&&g==="basicStoreInfo"&&e.jsx(fe,{}),Object.keys(D).length>0&&g==="myGames"&&e.jsx(pe,{})]})})})})]}):e.jsx("div",{className:"my-md-10 my-sm-0",children:e.jsx("div",{className:"container-lg",children:e.jsx("div",{className:"row flex-column flex-md-row g-0",children:e.jsx("p",{className:"h1 text-center",children:"尚未登入，或此頁面非您的會員ID"})})})})})}export{De as default};
