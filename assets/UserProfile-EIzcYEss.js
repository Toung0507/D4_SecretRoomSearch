import{a as O,r as t,M as N,j as e,b as $,o as Y,p as F,g as L,R as q,P as J,L as w,c as z,d as K}from"./index-DXL0b-Nc.js";import{u as Q}from"./index.esm-BdCDqsnP.js";import{u as U,b as V,d as E}from"./createContent-DD-n6Q9m.js";import{a as W}from"./index-C49KpcCS.js";import{T as X}from"./Toast-DPX6yt7t.js";import{I as H}from"./index-BpMqLs7L.js";import{T as Z,a as ee}from"./index-BngpzYzw.js";const R="https://new-json.onrender.com",se=()=>{const m=O(),{register:h,handleSubmit:j,formState:{errors:i}}=Q(),{user:n}=t.useContext(U),[p,u]=t.useState(n),[v,f]=t.useState(!1),[_,x]=t.useState("尚未驗證"),g=t.useRef(null),l=t.useRef(null),C=t.useRef(null),s=t.useRef(null),I=j(c=>{const d=n.user_id;v&&(async y=>{y.user_update_at=E().format("YYYY-MM-DD HH:mm:ss");try{await $.patch(`${R}/usersData/${d}`,y);try{const k=await $.get(`${R}/usersData/${d}`);m(Y(k.data)),f(!1)}catch(k){const P=k.response.data;m(F({text:P,status:"failed"}))}}catch(k){const P=k.response.data;m(F({text:P,status:"failed"}))}})(c)}),b=c=>{const{name:d,value:o}=c.target;u(y=>{const k={...y,[d]:o};return f(JSON.stringify(k)!==JSON.stringify(p)),k})},S=async()=>{const c=n.user_email,d=C.current.value,y=await m(L({user_email:c,user_password:d}));y.meta.requestStatus==="fulfilled"?(T(),M(),x("請輸入新密碼"),C.current.value=""):x(y.payload==="信箱及密碼需要輸入"||y.payload==="密碼請超過4碼"?"請輸入密碼驗證或密碼未超過4碼":y.payload)},r=async()=>{const c=s.current.value,d={user_password:c},o=n.user_id;if(c===""||c.length<4)x("新密碼需超過4碼");else{d.user_update_at=E().format("YYYY-MM-DD HH:mm:ss");try{await $.patch(`${R}/usersData/${o}`,d),m(F({text:`修改密碼成功
下次登入請使用新密碼`,status:"success"})),x("尚未驗證"),s.current.value="",setTimeout(()=>{a()},1e3)}catch(y){console.log(y.response.data.errors[0]),x("請連繫後台管理者做修改密碼"),m(F({text:"修改密碼失敗",status:"error"}))}}},D=()=>{N.getInstance(g.current).show()},M=()=>{N.getInstance(g.current).hide()},T=()=>{N.getInstance(l.current).show()},a=()=>{N.getInstance(l.current).hide()};return t.useEffect(()=>{new N(g.current,{backdrop:!1}),new N(l.current,{backdrop:!1})},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-lg-8 m-0 py-sm-10 px-0 ",children:[e.jsxs("div",{className:" border-nature-90 border-1 border",children:[e.jsx("div",{className:"fs-h6 lh-sm bg-secondary-95 fw-bold px-5 py-6 text-secondary-50",children:"會員資料"}),e.jsxs("div",{className:"user-info bg-white ",children:[e.jsxs("div",{className:"user_name d-flex px-6 py-sm-5 py-4 align-items-center border-nature-90 border-1 border-top border-bottom",children:[e.jsx("img",{src:(n==null?void 0:n.user_sex)==="男"?"./icon/man.png":(n==null?void 0:n.user_sex)==="女"?"./icon/woman.png":"./icon/user.png",alt:n==null?void 0:n.user_name,className:"rounded-circle",style:{width:"14%",objectFit:"cover",aspectRatio:"1/1"}}),e.jsx("h5",{className:"ps-5 fw-bold",children:n==null?void 0:n.user_name})]}),e.jsx("div",{className:"user_information p-6 ",children:e.jsxs("form",{className:"text-start",onSubmit:I,id:"userinfoform",children:[e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_name",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"姓名"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...h("user_name",{required:"姓名欄位必填"}),type:"text",className:`form-control ${i.user_name&&"is-invalid"}`,id:"user_name",name:"user_name",placeholder:"請輸入姓名或暱稱",value:p.user_name,onChange:b}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:i.user_name?i.user_name.message:"　"})]})]}),e.jsxs("div",{className:"row  mb-1",children:[e.jsx("label",{htmlFor:"user_email",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"信箱"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...h("user_email",{required:"信箱欄位必填"}),type:"email",className:"form-control",id:"user_email",name:"user_email",value:p.user_email,onChange:b}),e.jsx("button",{className:"text-secondary-50 bg-transparent border-0 border-bottom pt-1 ",onClick:D,children:"修改密碼"}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:i.user_email?i.user_email.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_sex",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"性別"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsxs("select",{className:`form-select ${i.user_sex&&"is-invalid"}`,"aria-label":"Default select example",...h("user_sex",{required:"性別欄位必填",validate:c=>c!=="請選擇性別"||"請選擇性別"}),value:p.user_sex,onChange:b,children:[e.jsx("option",{value:"請選擇性別",children:"請選擇性別"}),e.jsx("option",{value:"男",children:"男"}),e.jsx("option",{value:"女",children:"女"}),e.jsx("option",{value:"不提供",children:"不提供"})]}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:i.user_email?i.user_email.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_tel",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"電話"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...h("user_tel",{pattern:{value:/^(0[2-8]-\d{7,8}|09\d{8})$/,message:"市話格式為02-12345678手機格式為0912456789"}}),type:"tel",className:`form-control ${i.user_tel&&"is-invalid"}`,id:"user_tel",name:"user_tel",value:p.user_tel,onChange:b}),e.jsx("div",{className:"error-message text-danger mt-1",children:i.user_tel?i.user_tel.message:"　"})]})]}),e.jsxs("div",{className:"row mb-5",children:[e.jsx("label",{htmlFor:"user_email",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"第三方登入"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx(W,{size:24,className:"me-3"}),e.jsx(V,{size:24})]})]})]})}),e.jsx("div",{className:"px-6 py-4 border-nature-90 border-1 border-top",children:e.jsxs("div",{className:"btn_2 d-flex text-center flex-column flex-sm-row ",children:[e.jsx("button",{type:"reset",className:"btn bg-nature-60 text-white me-sm-6 mb-sm-0 mb-2",disabled:!v,form:"userinfoform",children:"取消更改"}),e.jsx("button",{type:"submit",className:"btn bg-secondary-60 text-white",form:"userinfoform",disabled:!v,children:"儲存變更"})]})})]})]}),e.jsx(X,{})]}),e.jsx("div",{ref:g,className:"modal fade m-0",id:"updatePawwordModal",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-secondary-95 flex-column align-items-start",children:[e.jsx("h4",{className:"modal-title fw-bold mb-2",children:"修改密碼"}),e.jsx("p",{children:"請先輸入目前密碼進行驗證"})]}),e.jsxs("div",{className:"modal-body px-5 py-10",children:[e.jsx("input",{type:"password",className:"w-100 border border-1 border-black rounded-1 ",ref:C}),e.jsx("div",{className:`error-message ${_==="尚未驗證"?"text-secondary-40":"text-danger"}  mt-1 fs-caption lh-1`,children:_})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"btn_2 d-flex text-center ",children:[e.jsx("button",{type:"button",className:"btn bg-nature-60 text-white me-6",onClick:M,children:"取消更改"}),e.jsx("button",{type:"button",className:"btn bg-secondary-60 text-white",onClick:S,children:"下一步"})]})})]})})}),e.jsx("div",{ref:l,className:"modal fade m-0",id:"updatePawwordModal",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-secondary-95",children:e.jsx("h4",{className:"modal-title fw-bold ",children:"修改密碼"})}),e.jsxs("div",{className:"modal-body px-6 py-10",children:[e.jsx("input",{type:"password",className:"w-100 border border-1 border-black rounded-1 ",ref:s}),e.jsx("div",{className:`error-message ${_==="尚未驗證"?"text-secondary-40":"text-danger"}  mt-1 fs-caption lh-1`,children:_})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"button",className:"btn bg-nature-60 text-white me-6",onClick:a,children:"取消更改"}),e.jsx("button",{type:"button",className:"btn bg-secondary-60 text-white",onClick:r,children:"儲存變更"})]})})]})})})]})},B=({message:m})=>e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column",children:[e.jsxs("p",{children:[m,"...",e.jsx("br",{})]}),e.jsx(q,{type:"spin",color:"black",width:"1rem",height:"1rem"})]});B.propTypes={message:J.string};const G="https://new-json.onrender.com",ae=()=>{const{user:m}=t.useContext(U),h=m.user_id,[j,i]=t.useState([]),[n,p]=t.useState(!0),[u,v]=t.useState([]),[f,_]=t.useState(!0),[x,g]=t.useState("nowGroup"),[l,C]=t.useState(!0);return t.useEffect(()=>{(async()=>{let I=[],b=[];try{(await $.get(`${G}/usersData/${h}/groupsData`)).data.map(r=>{!r.group_cancel&&r.group_isSuccessful===null?I.push(r):r.group_cancel&&r.group_isSuccessful?(r.status="已遊玩結束",b.push(r)):r.group_cancel&&!r.group_isSuccessful&&(r.status="已棄團",b.push(r))})}catch(S){console.log(S.response.data.errors[0])}finally{C(!1)}try{C(!0),(await $.get(`${G}/groupsData`)).data.map(r=>{r.group_participants.includes(h)&&(!r.group_cancel&&r.group_isSuccessful===null?I.push(r):r.group_cancel&&r.group_isSuccessful?(r.status="已遊玩結束",b.push(r)):r.group_cancel&&!r.group_isSuccessful&&(r.status="已棄團",b.push(r)))})}catch(S){console.log(S.response.data.errors[0])}finally{C(!1)}I.length===0?p(!1):i(I),b.length===0?_(!1):v(b)})()},[h]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"m-0 pt-10 px-0 d-none d-lg-block",children:[e.jsxs("div",{className:"border-nature-90 border rounded-2",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-6 py-5 text-secondary-50 fw-bold fs-h6",children:"揪團中"}),e.jsx("div",{className:"p-6 bg-white",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-light px-3",children:e.jsxs("tr",{className:"border-bottom border-nature-95 ",children:[e.jsx("th",{scope:"col",className:"text-secondary-40 ps-6 py-3 pe-0",children:"密室名稱"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室地點"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"遊玩日期"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"目前人數/人數上限"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0"})]})}),e.jsxs("tbody",{children:[l&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"bg-white py-3",children:e.jsx(B,{message:"載入揪團列表中"})})}),!l&&n&&j.map(s=>e.jsxs("tr",{className:"border-bottom border-nature-95",children:[e.jsx("td",{className:"ps-5 py-2 pe-0",children:s.game_name}),e.jsx("td",{className:"py-2 px-0",children:s.game_address}),e.jsx("td",{className:"py-2 px-0",children:s.group_active_date}),e.jsxs("td",{className:"py-2 px-0",children:[s.group_participants.length,"人/",s.group_member,"人"]}),e.jsx("td",{className:"pe-5 py-2 ps-0",children:e.jsxs(w,{to:`/TeamBuyComment/${s.group_id}`,className:"text-black",children:["查看詳情 ",e.jsx(H,{color:"black"})]})})]},s.group_id)),!l&&!n&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6 bg-white py-2",children:e.jsxs("p",{children:["沒有正在進行中的揪團",e.jsx("br",{}),"快到",e.jsx(w,{className:"d-inline text-nowrap",to:"/TeamBuy",children:"揪團中"}),"找尋你想玩的密室，一起加入吧！"]})})})]})]})})]}),e.jsxs("div",{className:"border-nature-90 border rounded-2 my-10",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-6 py-5 text-secondary-50 fw-bold fs-h6",children:"歷史揪團"}),e.jsx("div",{className:"p-6 bg-white",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-light px-3",children:e.jsxs("tr",{className:"border-bottom border-nature-95 ",children:[e.jsx("th",{scope:"col",className:"text-secondary-40 ps-6 py-3 pe-0",children:"狀態"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室名稱"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室地點"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"遊玩日期"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"參與人數/人數上限"})]})}),e.jsxs("tbody",{children:[l&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"bg-white py-3",children:e.jsx(B,{message:"載入揪團列表中"})})}),!l&&f&&u.map(s=>e.jsxs("tr",{className:"border-bottom border-nature-95",children:[e.jsx("td",{className:"py-2 py-2 pe-0",children:s.status}),e.jsx("td",{className:"py-2 px-0",children:s.game_name}),e.jsx("td",{className:"py-2 px-0",children:s.game_address}),e.jsx("td",{className:"py-2 px-0",children:s.group_active_date}),e.jsxs("td",{className:"pe-5 py-2 ps-0",children:[s.group_participants.length,"人/",s.group_member,"人"]})]},s.group_id)),!l&&!f&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6 bg-white py-2",children:e.jsxs("p",{children:["未參加過任何揪團",e.jsx("br",{}),"快到",e.jsx(w,{className:"d-inline text-nowrap",to:"/TeamBuy",children:"揪團中"}),"找尋你想玩的密室，一起加入吧！"]})})})]})]})})]})]}),e.jsxs("div",{className:"m-0 d-block d-lg-none",children:[e.jsxs("div",{className:"d-flex m-0 pt-5 ps-3 pb-3",children:[e.jsx("button",{className:`  btn border-1 border-secondary-50 me-3  fw-bold rounded-16 ${x==="nowGroup"?"bg-secondary-50 text-secondary-99":"text-secondary-50"}`,onClick:()=>g("nowGroup"),children:"揪團中"}),e.jsx("button",{className:`  btn border-1 border-secondary-50 rounded-16 fw-bold ${x==="historyGroup"?"bg-secondary-50 text-secondary-99":"text-secondary-50"}`,onClick:()=>g("historyGroup"),children:"歷史揪團"})]}),x==="nowGroup"&&e.jsxs("div",{className:"",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-4 py-5 text-secondary-50 fw-bold fs-h6",children:"揪團中"}),l&&e.jsx("dl",{children:e.jsx("dt",{className:"bg-white py-3",children:e.jsx(B,{message:"載入揪團列表中"})})}),!l&&n&&j.map(s=>e.jsxs("dl",{className:"mb-4 bg-white p-4",children:[e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室名稱"}),e.jsx("dd",{children:s.game_name}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室地點"}),e.jsx("dd",{children:s.game_address}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"遊玩日期："}),e.jsx("dd",{children:s.group_active_date}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"目前人數/人數上限"}),e.jsxs("dd",{className:"mb-3",children:[s.group_participants.length,"人/",s.group_member,"人"]}),e.jsx("dd",{className:"py-1 m-0",children:e.jsxs(w,{to:`/TeamBuyComment/${s.group_id}`,className:"text-black fw-bold fs-Caption",children:["查看詳情 ",e.jsx(H,{color:"black"})]})})]},s.group_id)),!l&&!n&&e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white py-2",children:e.jsxs("p",{children:["沒有正在進行中的揪團",e.jsx("br",{}),"快到",e.jsx(w,{className:"d-inline text-nowrap",to:"/TeamBuy",children:"揪團中"}),"找尋你想玩的密室，一起加入吧！"]})})})]}),x==="historyGroup"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-4 py-5 text-secondary-50 fw-bold fs-h6",children:"歷史揪團"}),l&&e.jsx("dl",{children:e.jsx("dt",{className:"bg-white py-3",children:e.jsx(B,{message:"載入揪團列表中"})})}),!l&&f&&u.map(s=>e.jsxs("dl",{className:"mb-4 bg-white p-4",children:[e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"狀態"}),e.jsx("dd",{children:s.status}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室名稱"}),e.jsx("dd",{children:s.game_name}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室地點"}),e.jsx("dd",{children:s.game_address}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"遊玩日期："}),e.jsx("dd",{children:"2025/01/30"}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"參與人數/人數上限"}),e.jsxs("dd",{className:"mb-3",children:[s.group_participants.length,"人/",s.group_member,"人"]})]},s.group_id)),!l&&!f&&e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white py-2",children:e.jsxs("p",{children:["未參加過任何揪團",e.jsx("br",{}),"快到",e.jsx(w,{className:"d-inline text-nowrap",to:"/TeamBuy",children:"揪團中"}),"找尋你想玩的密室，一起加入吧！"]})})})]})]})]})},te=t.createContext({}),A="https://new-json.onrender.com",le=()=>{const{user:m}=t.useContext(te),h=m.user_id,[j,i]=t.useState([]),[n,p]=t.useState([]),[u,v]=t.useState([]),[f,_]=t.useState(!0),x=t.useRef(null),g=t.useRef(null),[l,C]=t.useState({}),s=async()=>{let a=[],c=[];try{const d=await $.get(`${A}/usersData/${h}/commentsData`);if(i(d.data),d.data[0].includes("在 commentsData 資料表中無相關資料"))_(!1);else for(a of d.data)try{const o=await $.get(`${A}/gamesData/${a.game_id}`);a.game_name=o.data.game_name,a.game_dif_tagname=o.data.game_dif_tagname,a.game_main_tag1name=o.data.game_main_tag1name,a.game_main_tag2name=o.data.game_main_tag2name,c.push(a)}catch(o){console.error("Error fetching game data:",o)}}catch(d){console.error(d)}p(c)},I=(a,c=5)=>{const d=[];for(let o=0;o<a;o++)d.push(e.jsx(Z,{},`filled-${o}`));if(d.length===5)return d;for(let o=a;o<c;o++)d.push(e.jsx(ee,{},`empty-${o}`));return d},b=(a,c)=>JSON.stringify(a).length>c?a.slice(0,c)+"...":a,S=async()=>{try{await $.delete(`${A}/commentsData/${u}`),s(),T(),D()}catch(a){console.error(a)}},r=a=>{C(a),N.getInstance(x.current).show()},D=()=>{N.getInstance(x.current).hide()},M=a=>{v(a),N.getInstance(g.current).show()},T=()=>{N.getInstance(g.current).hide()};return t.useEffect(()=>{new N(x.current),new N(g.current)},[]),t.useEffect(()=>{s()},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-12 m-0  px-0 ",children:e.jsxs("div",{className:"border-nature-90 border rounded-2 my-10",children:[e.jsx("div",{className:"ParticipatingGroupTitle bg-secondary-95 px-6 py-5 text-secondary-50 fw-bold fs-h6",children:"我的評論"}),e.jsx("div",{className:"p-6 bg-white",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-light px-3",children:e.jsxs("tr",{className:"ParticipatingGroupThead ",children:[e.jsx("th",{scope:"col",className:"text-secondary-40 ps-6 py-3 pe-0",children:"遊玩日期"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室名稱"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"整體評價"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"通關狀態"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"難度"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"主題特色"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"體驗心得"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0"})]})}),e.jsx("tbody",{children:f?n.map(a=>e.jsxs("tr",{className:"ParticipatingGroupThead",children:[e.jsx("td",{className:"ps-5 py-2 pe-0",children:a.commet_played_time}),e.jsx("td",{className:"py-2 px-0",children:a.game_name}),e.jsx("td",{className:"py-2 px-0",children:I(a.coment_star)}),e.jsx("td",{className:"py-2 px-0",children:a.comment_isPass?"通關":"未通關"}),e.jsx("td",{className:"py-2 px-0",children:a.game_dif_tagname}),e.jsxs("td",{className:"py-2 px-0",children:[a.game_main_tag1name,"、",a.game_main_tag2name]}),e.jsx("td",{className:"py-2 px-0",children:b(a.coment_content,10)}),e.jsx("td",{className:"pe-5 py-2 ps-0",children:e.jsxs("button",{onClick:()=>r(a),className:"text-black border-0 fs-Body-1 btn btn-white p-0 commentButton m-0 ",children:["查看詳情 ",e.jsx(H,{color:"black"})]})})]},a.comment_id)):e.jsx(e.Fragment,{children:e.jsx("tr",{children:e.jsxs("td",{colSpan:8,className:"text-center fs-h6",children:["未留下任何評論，",e.jsx("br",{}),"歡迎到密室頁面分享你的心得讓更多人參考！"]})})})})]})})]})}),e.jsx("div",{ref:x,className:"modal fade m-0",id:"detailComment ",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-secondary-95 flex-column align-items-start",children:e.jsx("h4",{className:"modal-title fw-bold mb-2",children:l.game_name})}),e.jsxs("div",{className:"modal-body px-6 py-3",children:[e.jsxs("div",{className:"star mb-4",children:[e.jsx("span",{className:"mb-2",children:"整體評價"}),e.jsx("p",{className:"text-black",children:I(l.coment_star)})]}),e.jsxs("div",{className:"dif mb-4",children:[e.jsx("span",{className:"mb-2 fs-Body-2 fw-bold text-nature-50",children:"難度"}),e.jsx("p",{className:"text-black",children:l.game_dif_tagname})]}),e.jsxs("div",{className:"features mb-4",children:[e.jsx("span",{className:" fw-bold text-nature-50",children:"主題特色"}),e.jsxs("div",{className:"tags d-flex flex-wrap mt-2 gap",children:[e.jsx("span",{className:" bg-nature-95 px-2 py-1 rounded-3  text-nowrap me-2",children:l.game_main_tag1name}),e.jsx("span",{className:" bg-nature-95 px-2 py-1 rounded-3  text-nowrap",children:l.game_main_tag2name})]})]}),e.jsxs("div",{className:"pass mb-4",children:[e.jsx("span",{className:"mb-2 fs-Body-2 fw-bold text-nature-50",children:"通關狀態"}),e.jsx("p",{className:"text-black",children:l.comment_isPass?"通關":"未通關"})]}),e.jsxs("div",{className:"date mb-4",children:[e.jsx("span",{className:"mb-2 fs-Body-2 fw-bold text-nature-50",children:"遊玩日期"}),e.jsx("p",{className:"text-black",children:l.commet_played_time})]}),e.jsxs("div",{className:"isSpoilered mb-4",children:[e.jsx("span",{className:"mb-2 fs-Body-2 fw-bold text-nature-50",children:"是否劇透"}),e.jsx("p",{className:"text-black",children:l.comment_isSpoilered?"有劇透":"無劇透"})]}),e.jsxs("div",{className:"conten",children:[e.jsx("span",{className:"mb-2 fs-Body-2 fw-bold text-nature-50",children:"體驗心得"}),e.jsx("pre",{className:"fs-Body-1 text-black",children:l.coment_content})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"button",className:"btn bg-nature-60 text-white me-6",onClick:()=>M(l.comment_id),children:"刪除"}),e.jsx(w,{type:"button",className:"btn bg-secondary-60 text-white",to:`/Game_comment/edit/${l.comment_id}`,onClick:D,children:"編輯"})]})})]})})}),e.jsx("div",{ref:g,className:"modal fade",id:"delCommentModal",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h1",{className:"modal-title fs-5",children:"刪除此則評論"}),e.jsx("button",{onClick:T,type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:["你是否要刪除",e.jsxs("span",{className:"text-danger fw-bold",children:[" ",l.game_name," "]}),"此則遊戲的評論內容"]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:T,type:"button",className:"btn btn-secondary",children:"取消"}),e.jsx("button",{onClick:S,type:"button",className:"btn btn-danger",children:"刪除"})]})]})})})]})};function xe(){const{user:m,user_token:h}=z(_=>_.userInfo),{user_id:j,activedefaultTab:i}=K(),[n,p]=t.useState(!1),[u,v]=t.useState(i),f=t.useCallback(()=>{h&&Number(j)===Number(m.user_id)?p(!0):p(!1)},[m==null?void 0:m.user_id,j,h]);return t.useEffect(()=>{f(),v(i)},[j,i,f]),e.jsx(e.Fragment,{children:n?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"custom-profileMain flex-grow-1",children:[e.jsx("div",{className:"container-fluid bg-primary-99",children:e.jsx("div",{className:"container-lg ",children:e.jsx("div",{className:"row pt-10 ",children:e.jsxs("ul",{className:"d-flex",children:[e.jsx("li",{children:e.jsx(w,{className:`custom-profileTab fs-lg-h6 fs-Body-1 lh-base lh-lg-normal fw-bold ${u==="basicInfo"?"active":""} `,to:`/User_profile/${j}/basicInfo`,children:"基本資訊"})}),e.jsx("li",{children:e.jsx(w,{className:`custom-profileTab fs-lg-h6 fs-Body-1 lh-base lh-lg-normal fw-bold ${u==="participatingGroup"?"active":""} `,to:`/User_profile/${j}/participatingGroup`,children:"參加的揪團"})}),e.jsx("li",{children:e.jsx(w,{className:`custom-profileTab fs-lg-h6 fs-Body-1 lh-base lh-lg-normal fw-bold ${u==="myComments"?"active":""} `,to:`/User_profile/${j}/myComments`,children:"留下的評論"})})]})})})}),e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"",children:e.jsx("div",{className:"container-lg",children:e.jsx("div",{className:"row m-0 flex-column flex-md-row g-5 justify-content-center align-items-center",children:e.jsxs(U.Provider,{value:{user:m},children:[u==="basicInfo"&&e.jsx(se,{}),u==="participatingGroup"&&e.jsx(ae,{}),u==="myComments"&&e.jsx(le,{})]})})})})})]})}):e.jsx("div",{className:"my-md-10 my-sm-0",children:e.jsx("div",{className:"container-lg",children:e.jsx("div",{className:"row flex-column flex-md-row g-0",children:e.jsx("p",{className:"h1 text-center",children:"尚未登入，或此頁面非您的會員ID"})})})})})}export{xe as default};
